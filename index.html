<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>ñ</title>
        <link rel="stylesheet" href="styles.css" />
        <link rel="stylesheet" href="portada.css" />
        <link rel="stylesheet" href="jaume.css" />
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
        />
        <link
            href="https://fonts.googleapis.com/css2?family=Anton&family=Dosis:wght@200..800&family=Oswald:wght@200..700&family=Source+Code+Pro:ital,wght@0,200..900;1,200..900&display=swap"
            rel="stylesheet"
        />
        <link
            href="https://fonts.googleapis.com/css2?family=Anton&family=Dosis:wght@200..800&family=MedievalSharp&family=Oswald:wght@200..700&family=Source+Code+Pro:ital,wght@0,200..900;1,200..900&display=swap"
            rel="stylesheet"
        />

        <link
            href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap"
            rel="stylesheet"
        />

        <link
            href="https://fonts.googleapis.com/css2?family=Alegreya+Sans+SC:ital,wght@0,100;0,300;0,400;0,500;0,700;0,800;0,900;1,100;1,300;1,400;1,500;1,700;1,800;1,900&display=swap"
            rel="stylesheet"
        />

        <link
            href="https://fonts.googleapis.com/css2?family=Schibsted+Grotesk:ital,wght@0,400..900;1,400..900&display=swap"
            rel="stylesheet"
        />
    </head>
    <body>
        <div id="header" class="header">
            <button
                id="scroll-left"
                class="fas fa-chevron-left scroll-button"
            ></button>
            <div class="mini-book">
                <img
                    id="mini-portada"
                    src="portada_bck.jpg"
                    class="mini-book-page cover"
                    alt="Book Cover"
                />
                <img
                    id="mini-p1"
                    src="01_Jaume_Complete.png"
                    class="mini-book-page page1"
                    alt="Page 1"
                />
                <img
                    id="mini-p2"
                    src="Luis_Final.PNG"
                    class="mini-book-page page2"
                    alt="Page 2"
                />
                <img
                    id="mini-p3"
                    src="AdanYEsteban.PNG"
                    class="mini-book-page page3"
                    alt="Page 3"
                />
                <img
                    id="mini-p4"
                    src="ToroOle.PNG"
                    class="mini-book-page page4"
                    alt="Page 4"
                />
            </div>
            <button
                id="scroll-right"
                class="fas fa-chevron-right scroll-button"
            ></button>
        </div>
        <div class="separator"></div>
        <div class="llibre">
            <div class="pagina">
                <div class="contingut-pagina">
                    <h1>
                        " Una mirada crítica y divertida a la história de España "
                    </h1>
                    <h2>Bienvenido lector,</h2>
                    <p>
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed
                        do eiusmod tempor incididunt ut labore et dolore magna
                        aliqua. Ut enim ad minim veniam, quis nostrud exercitation
                        ullamco laboris nisi ut aliquip ex ea commodo consequat.
                    </p>
                    <p>
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed
                        do eiusmod tempor incididunt ut labore et dolore magna
                        aliqua. Ut enim ad minim veniam, quis nostrud exercitation
                        ullamco laboris nisi ut aliquip ex ea commodo consequat.
                    </p>
                    <p class="signature">
                        Atentamente,
                        <a
                            href="https://open.spotify.com/artist/3VUidb50jCH78EzrGpAVyj?si=T8P0HyduTxa0Q14v3LpxTA"
                            target="_blank"
                            class="signature-link"
                        >
                            miquel.
                        </a>
                        <a
                            href="https://open.spotify.com/artist/3VUidb50jCH78EzrGpAVyj?si=T8P0HyduTxa0Q14v3LpxTA"
                            target="_blank"
                            class="signature-link"
                        >
                            <img
                                src="miquel_icon.jpeg"
                                class="miquel-icon"
                                alt="Miquel Icon"
                            />
                        </a>
                    </p>
    
                    <div class="links-media">
                        <a
                            href="https://open.spotify.com/album/4yGHShZVKwkbmRkLTvGDfz?si=4ISAbXV-Tf2OOSPfc3njBw"
                            target="_blank"
                            class="media-button spotify-button"
                        >
                            <i class="fab fa-spotify media-icon spotify-icon"></i>
                            <span class="text">
                                escuchar en
                                <strong class="button-text">Spotify</strong>
                            </span>
                        </a>
                        <a
                            href="https://www.youtube.com/watch?v=_t30I3KH3UQ&pp=ygUQbWliaXNhYnVlbG9qYXVtZQ%3D%3D"
                            target="_blank"
                            class="media-button youtube-button"
                        >
                            <i class="fab fa-youtube media-icon youtube-icon"></i>
                            <span class="text">
                                ver en <strong class="button-text">YouTube</strong>
                            </span>
                        </a>
                    </div>
                    <!-- <div class="scroll-indicator">
                        <span class="scroll-text"
                            >Desliza en cualquier sitio para decubrir el
                            cuento</span
                        >
                        <i class="fas fa-chevron-right scroll-icon"></i>
                       
                    </div> -->
                </div>
            </div>
    
            <div class="pagina">
                <div class="contingut-pagina">
                    <h1>Mi bisabuelo Jaume</h1>
                    <div class="player-container">
                        <button class="play-button" id="playButton">
                            <i class="fa-solid fa-play"></i>
                        </button>
                        <div class="spectrum">
                            <div class="bar"></div>
                            <div class="bar"></div>
                            <div class="bar"></div>
                        </div>
                    </div>
                    <button id="toggle-fullscreen-jaume" class="fullscreen-button">
                        Letra y acordes
                    </button>
                    <audio
                        id="audioPlayer"
                        src="jaumesong.mp3"
                        preload="auto"
                    ></audio>
                    <p>
                        Fusce viverra cras varius eros nam leo, vel nascetur
                        <span class="colored">quisque</span> euismod rhoncus
                        aliquet. Praesent tellus mi sed bibendum faucibus est
                        placerat. Magnis vulputate
                        <span class="colored">maecenas</span> feugiat enim quis amet
                        platea suscipit auctor vehicula nam taciti. Sit quisque
                        auctor leo iaculis urna diam sagittis consequat blandit amet
                        erat. Neque etiam condimentum phasellus, torquent sagittis
                        ullamcorper ultricies tortor inceptos. Diam leo dapibus
                        posuere, magnis felis metus amet ipsum nam gravida.
                    </p>
                    <img src="Marco_Creu.PNG" class="icono-contingut" />
                    <p>
                        Fusce viverra cras varius eros nam leo, vel nascetur quisque
                        euismod rhoncus aliquet. Praesent tellus mi sed bibendum
                        faucibus est placerat. Magnis vulputate maecenas feugiat
                        enim quis amet platea suscipit auctor vehicula nam taciti.
                        Sit quisque auctor leo iaculis urna diam sagittis consequat
                        blandit amet erat. Neque etiam condimentum phasellus,
                        torquent sagittis ullamcorper ultricies tortor inceptos.
                        Diam leo dapibus posuere, magnis felis metus amet ipsum nam
                        gravida.
                    </p>
                </div>
                
            </div>
    
            <div class="pagina jaume">
                <div class="contingut-pagina">
                    <h1>Luis se fuerte</h1>
                </div>
            </div>
    
            <div class="pagina jaume">
                <div class="contingut-pagina">
                    <h1>Adan y esteban</h1>
                </div>
            </div>
    
            <div class="pagina jaume">
                <div class="contingut-pagina">
                    <h1>El toro ole</h1>
                </div>
            </div>
        </div>
        <div id="fullscreen-container-jaume" class="fullscreen-container">
            <button id="close-fullscreen-jaume" class="close-button">
                <i class="fas fa-times"></i>
            </button>
            <div class="separator-lyrics"></div>
            <div id="lyrics-jaume" class="lyrics-container">
            </div>
        </div>
        <div id="fullscreen-container-luis" class="fullscreen-container">
            <button id="close-fullscreen" class="close-button">
                <i class="fas fa-times"></i>
            </button>
            <div class="separator-lyrics"></div>
            <div id="lyrics-luis" class="lyrics-container">
            </div>
        </div>

        <script>
            document.addEventListener("DOMContentLoaded", () => {
                const pages = document.querySelectorAll(".pagina");
                const miniBookImages =
                    document.querySelectorAll(".mini-book img");
                const llibre = document.querySelector(".llibre");

                const observer = new IntersectionObserver(
                    (entries) => {
                        entries.forEach((entry) => {
                            if (entry.isIntersecting) {
                                const pageIndex = Array.from(pages).indexOf(
                                    entry.target
                                );

                                // Update the mini-book images based on scroll position
                                miniBookImages.forEach((img, index) => {
                                    if (index < pageIndex) {
                                        // Rotate and move pages back as you scroll past them
                                        img.style.transform = `rotateY(-140deg)`;
                                        img.style.opacity = "0";
                                        img.style.transition =
                                            "transform 1s ease, opacity 0s ease 1s";
                                    } else {
                                        // Reset rotation for the current and future pages
                                        img.style.transform = `rotateY(0deg) translateZ(-${
                                            index * 10
                                        }px)`;
                                        img.style.opacity = "1";
                                        img.style.transition =
                                            "transform 1s ease, opacity 0s";
                                    }
                                });
                            }
                        });
                    },
                    {
                        root: null, // Use the viewport as the root
                        threshold: 0.3, // Trigger when 30% of the element is in view
                        rootMargin: "0px", // No margin around the root
                    }
                );

                pages.forEach((page) => {
                    observer.observe(page);
                });
            });
        </script>
        <script>
            document
                .getElementById("playButton")
                .addEventListener("click", function () {
                    const audio = document.getElementById("audioPlayer");
                    const playButton = this;

                    if (audio.paused) {
                        audio.play();
                        playButton
                            .querySelector("i")
                            .classList.remove("fa-play");
                        playButton.querySelector("i").classList.add("fa-pause");
                        document.querySelectorAll(".bar").forEach((bar) => {
                            bar.style.animationPlayState = "running";
                        });
                    } else {
                        audio.pause();
                        playButton
                            .querySelector("i")
                            .classList.remove("fa-pause");
                        playButton.querySelector("i").classList.add("fa-play");
                        document.querySelectorAll(".bar").forEach((bar) => {
                            bar.style.animationPlayState = "paused";
                        });
                    }
                });

            document
                .getElementById("audioPlayer")
                .addEventListener("ended", function () {
                    const playButton = document.getElementById("playButton");
                    playButton.querySelector("i").classList.remove("fa-pause");
                    playButton.querySelector("i").classList.add("fa-play");
                    document.querySelectorAll(".bar").forEach((bar) => {
                        bar.style.animationPlayState = "paused";
                    });
                });
        </script>

        <script>
            document.addEventListener("DOMContentLoaded", () => {
                const scrollLeftButton = document.getElementById("scroll-left");
                const scrollRightButton =
                    document.getElementById("scroll-right");
                const llibre = document.querySelector(".llibre");

                const scrollAmount = 100;

                function scrollLeft() {
                    llibre.scrollBy({
                        left: -scrollAmount,
                        behavior: "smooth",
                    });
                }

                function scrollRight() {
                    llibre.scrollBy({
                        left: scrollAmount,
                        behavior: "smooth",
                    });
                }

                scrollLeftButton.addEventListener("click", scrollLeft);
                scrollRightButton.addEventListener("click", scrollRight);
            });
        </script>

        <script>
            document.addEventListener("DOMContentLoaded", () => {
                const pageContents =
                    document.querySelectorAll(".contingut-pagina");

                pageContents.forEach((content) => {
                    const childElements = content.children;

                    const observer = new IntersectionObserver(
                        (entries) => {
                            entries.forEach((entry) => {
                                if (entry.isIntersecting) {
                                    entry.target.classList.add("visible");
                                }
                            });
                        },
                        {
                            root: null, // Use the viewport as the root
                            threshold: 0.3, // Trigger when 30% of the element is in view
                        }
                    );

                    Array.from(childElements).forEach((element) => {
                        observer.observe(element);
                    });
                });
            });
        </script>

        <script>
            // Example data structure
            const data = [
                {
                    paragraph: [
                        [{ text: "Mi bisabuelo Jaume", chord: "E" }],
                        [
                            { text: "fue a la guerra", chord: "" },
                            { text: "civil", chord: "Fm#" },
                        ],
                        [
                            { text: "y no empuño ni un", chord: "" },
                            { text: "arma", chord: "B7" },
                        ],
                        [
                            { text: "a nadie quiso", chord: "" },
                            { text: "herir", chord: "E" },
                        ],
                    ],
                },
                {
                    paragraph: [
                        [{ text: "Sirvió de camillero", chord: "E" }],
                        [
                            { text: "y balas", chord: "" },
                            { text: "empuño unas mil", chord: "Fm#" },
                        ],
                        [
                            { text: "sirviendo a los", chord: "" },
                            { text: "maltrechos", chord: "B7" },
                        ],
                        [{ text: "en la batalla del ebro", chord: "" }],
                        [
                            { text: "la mas cruel y la mas", chord: "" },
                            { text: "vil.", chord: "E" },
                        ],
                    ],
                },
                {
                    paragraph: [
                        [{ text: "Sirvió de camillero", chord: "E" }],
                        [
                            { text: "y balas", chord: "" },
                            { text: "empuño unas mil", chord: "Fm#" },
                        ],
                        [
                            { text: "sirviendo a los", chord: "" },
                            { text: "maltrechos", chord: "B7" },
                        ],
                        [{ text: "en la batalla del ebro", chord: "" }],
                        [
                            { text: "la mas cruel y la mas", chord: "" },
                            { text: "vil.", chord: "E" },
                        ],
                    ],
                },
                {
                    paragraph: [
                        [{ text: "Sirvió de camillero", chord: "E" }],
                        [
                            { text: "y balas", chord: "" },
                            { text: "empuño unas mil", chord: "Fm#" },
                        ],
                        [
                            { text: "sirviendo a los", chord: "" },
                            { text: "maltrechos", chord: "B7" },
                        ],
                        [{ text: "en la batalla del ebro", chord: "" }],
                        [
                            { text: "la mas cruel y la mas", chord: "" },
                            { text: "vil.", chord: "E" },
                        ],
                    ],
                },
            ];

            // Function to create HTML elements
            function createLyricsHTML(data) {
                const container = document.getElementById("lyrics-jaume");
                container.innerHTML = ""; // Clear any existing content

                data.forEach((paragraphData) => {
                    // Create a new paragraph container
                    const paragraph = document.createElement("div");
                    paragraph.classList.add("paragraph");

                    paragraphData.paragraph.forEach((lineData) => {
                        // Create a new line container
                        const line = document.createElement("div");
                        line.classList.add("line");

                        let previousChord = ""; // Track the previous chord

                        lineData.forEach((item) => {
                            const textWithChord = document.createElement("div");
                            textWithChord.classList.add("text-with-chord");

                            const chord = document.createElement("div");
                            chord.classList.add("chord");
                            chord.textContent = item.chord;

                            const text = document.createElement("div");
                            text.classList.add("text");
                            text.textContent = item.text;

                            // Check if chord is empty or same as previous chord
                            if (
                                item.chord === "" ||
                                item.chord === previousChord
                            ) {
                                chord.classList.add("empty");
                            } else {
                                chord.classList.remove("empty");
                            }

                            textWithChord.appendChild(chord);
                            textWithChord.appendChild(text);
                            line.appendChild(textWithChord);

                            previousChord = item.chord; // Update the previous chord
                        });

                        paragraph.appendChild(line);
                    });

                    container.appendChild(paragraph);
                });
            }

            // Create the HTML from the data
            createLyricsHTML(data);
        </script>

        <script>
            document.addEventListener("DOMContentLoaded", () => {
                const fullscreenButton =
                    document.getElementById("toggle-fullscreen-jaume");

                const closeButton =
                    document.getElementById("close-fullscreen-jaume");
                const fullscreenContainer = document.getElementById(
                    "fullscreen-container-jaume"
                );

                fullscreenButton.addEventListener("click", () => {
                    fullscreenContainer.classList.add("active");
                });

                closeButton.addEventListener("click", () => {
                    fullscreenContainer.classList.remove("active");
                });
            });
        </script>
    </body>
</html>
